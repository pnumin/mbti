<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>상세 MBTI 성격 유형 검사</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        /* 커스텀 애니메이션 */
        .fade-in {
            animation: fadeIn 0.6s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .progress-bar-fill {
            transition: width 0.5s ease-in-out;
        }
        /* 커스텀 슬라이더 스타일 */
        input[type=range] {
            -webkit-appearance: none;
            width: 100%;
            background: transparent;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 24px;
            width: 24px;
            border-radius: 50%;
            background: #4f46e5;
            cursor: pointer;
            margin-top: -9px;
            transition: transform 0.2s;
        }
        input[type=range]:hover::-webkit-slider-thumb {
            transform: scale(1.1);
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 6px;
            cursor: pointer;
            background: #e5e7eb;
            border-radius: 3px;
        }
    </style>
</head>
<body class="bg-gray-50 flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-3xl mx-auto bg-white rounded-2xl shadow-xl p-6 sm:p-10 transition-all duration-500">

        <!-- 시작 화면 -->
        <div id="start-screen" class="text-center fade-in">
            <h1 class="text-3xl sm:text-4xl font-bold text-gray-800 mb-4">상세 MBTI 성격 유형 검사</h1>
            <p class="text-gray-600 mb-6 text-lg">각 문항을 읽고 자신의 생각이나 행동에 더 가까운 쪽으로<br>슬라이더를 조절하여 답변해주세요.</p>
            <div class="flex justify-center mb-8">
                <svg class="w-32 h-32 text-indigo-500 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.562L16.25 22.5l-.648-1.938a3.375 3.375 0 00-2.684-2.684L11.25 18l1.938-.648a3.375 3.375 0 002.684-2.684L16.25 13.5l.648 1.938a3.375 3.375 0 002.684 2.684L21.75 18l-1.938.648a3.375 3.375 0 00-2.684 2.684z"></path>
                </svg>
            </div>
            <p class="text-sm text-gray-500 mb-8">※ 본 검사는 간이 검사이며, 정식 검사와는 차이가 있을 수 있습니다.</p>
            <button id="start-btn" class="w-full sm:w-auto bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-full text-lg transition-transform transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-indigo-300">
                검사 시작하기
            </button>
        </div>

        <!-- 질문 화면 -->
        <div id="question-screen" class="hidden">
            <!-- 진행률 바 -->
            <div class="w-full bg-gray-200 rounded-full h-2.5 mb-2">
                <div id="progress-bar" class="bg-indigo-600 h-2.5 rounded-full progress-bar-fill" style="width: 0%"></div>
            </div>
            <p id="question-number" class="text-right text-sm text-gray-500 mb-6"></p>
            
            <div id="question-container" class="text-center fade-in">
                <h2 id="question-text" class="text-xl sm:text-2xl font-bold text-gray-800 mb-10 h-24 flex items-center justify-center"></h2>
                
                <div class="flex justify-between items-center text-md sm:text-lg font-bold mb-4">
                    <span id="choice-a" class="text-indigo-600 w-2/5 text-right leading-snug"></span>
                    <span class="text-gray-400 mx-2 text-sm">중립</span>
                    <span id="choice-b" class="text-teal-600 w-2/5 text-left leading-snug"></span>
                </div>

                <input type="range" id="answer-slider" min="-3" max="3" value="0" step="1" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                
                <div class="flex justify-between text-xs text-gray-500 px-1 mt-2">
                    <span>매우 그렇다</span>
                    <span>그렇다</span>
                    <span>조금 그렇다</span>
                    <span>보통</span>
                    <span>조금 그렇다</span>
                    <span>그렇다</span>
                    <span>매우 그렇다</span>
                </div>

                <button id="next-btn" class="mt-12 w-full sm:w-1/2 mx-auto bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-full text-lg transition-transform transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-indigo-300">
                    다음
                </button>
            </div>
        </div>

        <!-- 결과 화면 -->
        <div id="result-screen" class="hidden fade-in text-center">
            <p class="text-indigo-600 font-semibold mb-2">당신의 성격 유형은...</p>
            <h1 id="mbti-type" class="text-6xl font-extrabold text-indigo-600 mb-2"></h1>
            <p id="mbti-title" class="text-2xl font-bold text-gray-800 mb-8"></p>

            <div id="result-bars" class="text-left space-y-6 mb-10">
                <!-- 결과 바가 동적으로 생성됩니다 -->
            </div>

            <div class="text-left bg-gray-50 p-6 rounded-lg">
                <h3 class="font-bold text-lg text-gray-800 mb-3">유형 설명</h3>
                <p id="mbti-description" class="text-gray-600 leading-relaxed"></p>
            </div>
             <div class="text-left bg-gray-50 p-6 rounded-lg mt-4">
                <h3 class="font-bold text-lg text-gray-800 mb-3">강점 및 약점</h3>
                <p id="mbti-strengths" class="text-gray-600 leading-relaxed"></p>
            </div>

            <button id="restart-btn" class="mt-10 w-full sm:w-auto bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-full text-lg transition-transform transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-indigo-300">
                다시 검사하기
            </button>
        </div>
    </div>

    <script>
        // DOM Elements
        const startScreen = document.getElementById('start-screen');
        const questionScreen = document.getElementById('question-screen');
        const resultScreen = document.getElementById('result-screen');
        const startBtn = document.getElementById('start-btn');
        const nextBtn = document.getElementById('next-btn');
        const restartBtn = document.getElementById('restart-btn');
        
        const progressBar = document.getElementById('progress-bar');
        const questionNumberEl = document.getElementById('question-number');
        const questionTextEl = document.getElementById('question-text');
        const choiceAEl = document.getElementById('choice-a');
        const choiceBEl = document.getElementById('choice-b');
        const answerSlider = document.getElementById('answer-slider');

        const mbtiTypeEl = document.getElementById('mbti-type');
        const mbtiTitleEl = document.getElementById('mbti-title');
        const mbtiDescriptionEl = document.getElementById('mbti-description');
        const mbtiStrengthsEl = document.getElementById('mbti-strengths');
        const resultBarsEl = document.getElementById('result-bars');

        // Questions Data
        const questions = [
            // EI: choiceA = I, choiceB = E
            { type: "EI", choiceA: "소수의 사람들과 깊이 있는 대화를 선호한다", choiceB: "다양한 사람들과 넓은 관계를 맺는 것을 즐긴다" },
            { type: "EI", choiceA: "주말에는 주로 집에서 조용히 휴식을 취한다", choiceB: "주말에는 약속을 잡고 사람들을 만나러 나간다" },
            { type: "EI", choiceA: "글로 생각을 표현하는 것이 더 편안하다", choiceB: "말로 직접 생각을 표현하는 것이 더 편안하다" },
            { type: "EI", choiceA: "활동에 참여할 때, 주로 관찰하는 역할을 한다", choiceB: "활동에 참여할 때, 주도적으로 이끄는 역할을 한다" },
            { type: "EI", choiceA: "에너지를 안으로 쓰며 생각을 정리한다", choiceB: "에너지를 밖으로 표현하며 생각을 정리한다" },

            // SN: choiceA = S, choiceB = N
            { type: "SN", choiceA: "과거의 경험과 현재의 사실을 더 신뢰한다", choiceB: "미래의 가능성과 숨겨진 의미를 더 중요하게 생각한다" },
            { type: "SN", choiceA: "나무를 보듯, 사물의 구체적인 부분을 먼저 본다", choiceB: "숲을 보듯, 사물의 전체적인 그림을 먼저 본다" },
            { type: "SN", choiceA: "실용적이고 현실적인 해결책을 선호한다", choiceB: "창의적이고 독창적인 아이디어를 선호한다" },
            { type: "SN", choiceA: "설명서를 순서대로 따르는 것이 편하다", choiceB: "설명서보다는 직관에 따라 행동하는 것이 편하다" },
            { type: "SN", choiceA: "익숙하고 검증된 방식으로 일하는 것을 좋아한다", choiceB: "새롭고 혁신적인 방식으로 일하는 것을 좋아한다" },

            // TF: choiceA = T, choiceB = F
            { type: "TF", choiceA: "결정할 때, 무엇이 논리적이고 공정한지 먼저 생각한다", choiceB: "결정할 때, 다른 사람에게 어떤 영향을 미칠지 먼저 생각한다" },
            { type: "TF", choiceA: "진실과 사실을 전달하는 것이 가장 중요하다고 믿는다", choiceB: "사람들 간의 조화와 관계를 유지하는 것이 중요하다고 믿는다" },
            { type: "TF", choiceA: "비판적인 분석을 통해 문제를 해결하려고 한다", choiceB: "따뜻한 공감과 위로를 통해 사람들을 도우려고 한다" },
            { type: "TF", choiceA: "원칙과 기준을 중요하게 생각한다", choiceB: "상황과 감정을 중요하게 생각한다" },
            { type: "TF", choiceA: "객관적인 입장을 유지하는 것이 편하다", choiceB: "주관적인 감정에 귀 기울이는 것이 편하다" },
            
            // JP: choiceA = J, choiceB = P
            { type: "JP", choiceA: "여행을 떠나기 전, 모든 일정을 계획해 둔다", choiceB: "여행지에서 즉흥적으로 마음 가는 대로 움직인다" },
            { type: "JP", choiceA: "일을 시작하기 전에 명확한 계획과 목표가 필요하다", choiceB: "상황에 맞춰 유연하게 일을 진행하는 것을 즐긴다" },
            { type: "JP", choiceA: "정리정돈된 환경에서 안정감을 느낀다", choiceB: "자유롭고 개방적인 환경에서 영감을 얻는다" },
            { type: "JP", choiceA: "결정을 빨리 내리고 다음 단계로 넘어가는 것을 선호한다", choiceB: "가능성을 열어두고 마지막 순간까지 정보를 수집한다" },
            { type: "JP", choiceA: "마감 기한을 미리 지키기 위해 체계적으로 일한다", choiceB: "마감 기한이 임박했을 때 집중력이 가장 높아진다" }
        ];
        
        // Result Data
        const results = {
            ISTJ: { title: "청렴결백한 논리주의자", description: "현실 감각이 뛰어나고 책임감이 강하며, 한번 시작한 일은 끝까지 해내는 성실한 유형입니다. 규칙을 중시하고 약속을 잘 지키며, 조직에서 안정적인 역할을 수행합니다.", strengths: "강점: 책임감, 성실함, 논리성\n약점: 융통성 부족, 변화에 대한 두려움, 타인 감정 파악의 어려움" },
            ISFJ: { title: "용감한 수호자", description: "차분하고 헌신적이며, 주변 사람들을 돕는 것에서 행복을 느낍니다. 타인의 감정을 잘 살피고, 인내심이 강하며 성실하여 안정적인 관계를 중요시합니다.", strengths: "강점: 헌신적, 공감 능력, 책임감\n약점: 거절의 어려움, 과도한 자기희생, 변화에 대한 저항" },
            INFJ: { title: "선의의 옹호자", description: "통찰력이 높고 영감이 뛰어나며, 사람들에게 긍정적인 영향을 주는 것을 중요하게 생각합니다. 이상주의적인 성향이 강하며, 깊고 의미 있는 관계를 추구합니다.", strengths: "강점: 통찰력, 창의성, 공감 능력\n약점: 지나친 이상주의, 번아웃에 취약, 비판에 민감함" },
            INTJ: { title: "용의주도한 전략가", description: "상상력이 풍부하며 철두철미한 계획을 세우는 전략가입니다. 지식을 중요하게 생각하고, 독립적이며 논리적 사고를 통해 복잡한 문제를 해결하는 데 능숙합니다.", strengths: "강점: 전략적 사고, 독립성, 자신감\n약점: 오만함, 사회적 관계의 어려움, 지나친 완벽주의" },
            ISTP: { title: "만능 재주꾼", description: "논리적이고 실용적이며, 도구와 기계를 다루는 데 뛰어난 재능을 보입니다. 위기 상황에 대처하는 능력이 뛰어나고, 새로운 경험과 스릴을 즐깁니다.", strengths: "강점: 위기 대처 능력, 실용성, 논리적 분석\n약점: 장기 계획 부족, 충동성, 감정 표현의 어려움" },
            ISFP: { title: "호기심 많은 예술가", description: "온화하고 겸손하며, 삶의 여유를 즐길 줄 아는 예술가 유형입니다. 현재를 즐기며, 다른 사람의 감정에 민감하고 미적 감각이 뛰어납니다.", strengths: "강점: 예술적 감각, 개방성, 겸손함\n약점: 갈등 회피, 비판에 대한 민감성, 계획성 부족" },
            INFP: { title: "열정적인 중재자", description: "상냥하고 이타적이며, 이상적인 세계를 꿈꾸는 낭만가입니다. 자신의 가치관을 중요하게 생각하며, 다른 사람의 가능성을 믿고 지지해주는 따뜻한 마음을 가졌습니다.", strengths: "강점: 공감 능력, 창의성, 이상주의\n약점: 지나치게 감정적, 비현실적, 갈등 회피" },
            INTP: { title: "논리적인 사색가", description: "끊임없이 새로운 지식에 목말라 하는 혁신가 유형입니다. 논리적이고 분석적이며, 복잡한 문제를 해결하는 것을 즐기지만, 때로는 사회적 관습에 무관심할 수 있습니다.", strengths: "강점: 분석력, 독창성, 지적 호기심\n약점: 사회성 부족, 지나친 이론화, 감정적 둔감함" },
            ESTP: { title: "모험을 즐기는 사업가", description: "넘치는 에너지와 재치로 주변 사람들을 즐겁게 만드는 유형입니다. 현실적인 문제 해결에 능하며, 스릴과 모험을 즐기고 주목받는 것을 좋아합니다.", strengths: "강점: 사교성, 현실 감각, 위기 대처 능력\n약점: 충동성, 장기 계획 부족, 무모함" },
            ESFP: { title: "자유로운 영혼의 연예인", description: "사교적이고 즉흥적이며, 사람들의 주목을 받는 것을 즐깁니다. 현재의 즐거움을 중요하게 생각하며, 뛰어난 공감 능력으로 분위기 메이커 역할을 합니다.", strengths: "강점: 사교성, 긍정적 에너지, 현실적\n약점: 계획성 부족, 충동 구매, 갈등 회피" },
            ENFP: { title: "재기발랄한 활동가", description: "상상력이 풍부하고 열정적이며, 사람들과 어울리는 것을 좋아하는 유형입니다. 긍정적이고 창의적이며, 새로운 도전을 즐기고 가능성을 탐색하는 것을 좋아합니다.", strengths: "강점: 창의성, 열정, 사교성\n약점: 집중력 부족, 과도한 감정 기복, 일의 마무리가 어려움" },
            ENTP: { title: "뜨거운 논쟁을 즐기는 변론가", description: "지적인 도전을 두려워하지 않는 똑똑한 유형입니다. 새로운 아이디어를 내는 것을 즐기며, 논리적인 토론을 통해 자신의 지식을 확장하는 것을 좋아합니다.", strengths: "강점: 지적 호기심, 창의성, 논리적 토론 능력\n약점: 인내심 부족, 반항적 성향, 타인 감정 고려 미흡" },
            ESTJ: { title: "엄격한 관리자", description: "현실적이고 추진력이 강하며, 조직을 관리하는 데 뛰어난 능력을 보입니다. 규칙을 중시하고, 책임감이 강하여 리더 역할을 잘 수행하며, 목표 달성을 중요시합니다.", strengths: "강점: 리더십, 조직력, 책임감\n약점: 융통성 부족, 감정 표현의 어려움, 완고함" },
            ESFJ: { title: "사교적인 외교관", description: "타인에게 관심이 많고 사교적이며, 주변 사람들을 챙기는 것을 좋아합니다. 동정심이 많고, 조화로운 관계를 중요하게 생각하여 집단의 화합을 이끌어냅니다.", strengths: "강점: 사교성, 공감 능력, 책임감\n약점: 비판에 민감, 타인의 시선에 대한 과도한 의식, 거절의 어려움" },
            ENFJ: { title: "정의로운 사회운동가", description: "넘치는 카리스마와 열정으로 사람들을 이끄는 리더 유형입니다. 타인의 성장을 돕는 것에서 보람을 느끼며, 자신의 이상을 실현하기 위해 적극적으로 행동합니다.", strengths: "강점: 리더십, 이타심, 공감 능력\n약점: 지나친 이상주의, 타인 문제에 대한 과몰입, 비판에 대한 민감성" },
            ENTJ: { title: "대담한 통솔자", description: "타고난 리더십과 자신감으로 목표를 향해 나아가는 유형입니다. 도전을 즐기며, 장기적인 계획을 세우고 실행하는 능력이 뛰어나고, 비효율적인 것을 참지 못합니다.", strengths: "강점: 리더십, 결단력, 전략적 사고\n약점: 성급함, 오만함, 타인 감정에 대한 둔감함" }
        };

        const typeMap = {
            EI: { a: '내향', b: '외향' },
            SN: { a: '감각', b: '직관' },
            TF: { a: '사고', b: '감정' },
            JP: { a: '판단', b: '인식' }
        };

        let currentQuestionIndex = 0;
        let answers = [];

        function startTest() {
            currentQuestionIndex = 0;
            answers = [];
            startScreen.classList.add('hidden');
            resultScreen.classList.add('hidden');
            questionScreen.classList.remove('hidden');
            showQuestion();
        }

        function showQuestion() {
            const question = questions[currentQuestionIndex];
            const progress = (currentQuestionIndex / questions.length) * 100;
            progressBar.style.width = `${progress}%`;
            questionNumberEl.textContent = `${currentQuestionIndex + 1} / ${questions.length}`;
            questionTextEl.textContent = "두 가지 선택지 중 당신의 생각이나 행동에 더 가까운 쪽으로 슬라이더를 움직여주세요.";

            choiceAEl.textContent = question.choiceA;
            choiceBEl.textContent = question.choiceB;
            
            answerSlider.value = 0;
        }

        function handleNext() {
            const value = parseInt(answerSlider.value);
            const question = questions[currentQuestionIndex];
            answers.push({ type: question.type, value: value });
            
            currentQuestionIndex++;
            if (currentQuestionIndex < questions.length) {
                const questionContainer = document.getElementById('question-container');
                questionContainer.classList.remove('fade-in');
                void questionContainer.offsetWidth; // Force reflow
                questionContainer.classList.add('fade-in');
                showQuestion();
            } else {
                calculateResult();
            }
        }

        function calculateResult() {
            let scores = { EI: 0, SN: 0, TF: 0, JP: 0 };
            const maxScorePerType = 3 * 5; // 5 questions per type, max slider value is 3

            answers.forEach(answer => {
                scores[answer.type] += answer.value;
            });
            
            // Positive score = B choice (E, N, F, P)
            // Negative score = A choice (I, S, T, J)
            const e_percent = Math.round(50 + (scores.EI / maxScorePerType) * 50);
            const n_percent = Math.round(50 + (scores.SN / maxScorePerType) * 50);
            const f_percent = Math.round(50 + (scores.TF / maxScorePerType) * 50);
            const p_percent = Math.round(50 + (scores.JP / maxScorePerType) * 50);

            const finalType = 
                (e_percent >= 50 ? 'E' : 'I') +
                (n_percent >= 50 ? 'N' : 'S') +
                (f_percent >= 50 ? 'F' : 'T') +
                (p_percent >= 50 ? 'P' : 'J');
                
            showResult(finalType, [e_percent, n_percent, f_percent, p_percent]);
        }
        
        function showResult(type, percentages) {
            const resultData = results[type];
            mbtiTypeEl.textContent = type;
            mbtiTitleEl.textContent = resultData.title;
            mbtiDescriptionEl.textContent = resultData.description;
            mbtiStrengthsEl.innerText = resultData.strengths;

            const percentageData = [
                { labels: typeMap.EI, percent_b: percentages[0] }, // 외향(E) %
                { labels: typeMap.SN, percent_b: percentages[1] }, // 직관(N) %
                { labels: typeMap.TF, percent_b: percentages[2] }, // 감정(F) %
                { labels: typeMap.JP, percent_b: percentages[3] }  // 인식(P) %
            ];

            resultBarsEl.innerHTML = ''; // Clear previous bars

            percentageData.forEach(data => {
                const b_percent = data.percent_b; // B choice (오른쪽) %
                const a_percent = 100 - b_percent;   // A choice (왼쪽) %

                const barHTML = `
                    <div class="space-y-2">
                        <div class="flex justify-between font-bold text-gray-700">
                            <span>${data.labels.a}</span>
                            <span>${data.labels.b}</span>
                        </div>
                        <div class="w-full flex h-8 rounded-full overflow-hidden bg-gray-200">
                            <div class="flex items-center justify-center bg-indigo-500 text-white font-bold" style="width: ${a_percent}%">${a_percent}%</div>
                            <div class="flex items-center justify-center bg-teal-500 text-white font-bold" style="width: ${b_percent}%">${b_percent}%</div>
                        </div>
                    </div>
                `;
                resultBarsEl.innerHTML += barHTML;
            });

            questionScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');
        }

        // Event Listeners
        startBtn.addEventListener('click', startTest);
        nextBtn.addEventListener('click', handleNext);
        restartBtn.addEventListener('click', startTest);

    </script>
</body>
</html>

